{"ast":null,"code":"export default class ReCaptcha {\n  constructor(SITE_KEY, ACTION, V2_SITE_KEY, setWidgetID) {\n    var _this = this;\n\n    this.siteKey = void 0;\n    this.v2siteKey = void 0;\n    this.action = void 0;\n    this.setWidgetID = void 0;\n\n    this.resetV2Captcha = function (widgetID) {\n      let index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      const v2CaptchaContainer = document.getElementsByClassName('v2-recaptcha')[index];\n\n      if (v2CaptchaContainer) {\n        if (widgetID.get(index) || widgetID.get(index) == 0) {\n          window.grecaptcha.reset(widgetID.get(index));\n        }\n\n        v2CaptchaContainer.style.display = \"none\";\n      }\n    };\n\n    this.loadV2Captcha = function (v2siteKey, widgetID) {\n      let index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      let reload = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      _this.resetV2Captcha(widgetID, index);\n\n      const v2CaptchaContainer = document.getElementsByClassName('v2-recaptcha')[index];\n\n      if ((widgetID.get(index) || widgetID.get(index) == \"0\") && !reload) {\n        const v2CaptchaContainer = document.getElementsByClassName('v2-recaptcha')[index];\n\n        if (v2CaptchaContainer) {\n          v2CaptchaContainer.style.display = \"block\";\n        }\n      } else {\n        v2CaptchaContainer.style.display = \"block\";\n        const newWidgetID = window.grecaptcha.render(v2CaptchaContainer, {\n          'sitekey': v2siteKey,\n          'theme': 'dark'\n        });\n        widgetID.set(index, newWidgetID);\n\n        _this.setWidgetID(widgetID);\n      }\n\n      return true;\n    };\n\n    this.loadReCaptcha = siteKey => {\n      const script = document.createElement('script');\n      script.src = `https://www.recaptcha.net/recaptcha/api.js?render=${siteKey}`;\n      document.body.appendChild(script);\n      return true;\n    };\n\n    this.loadReCaptcha(SITE_KEY);\n    this.siteKey = SITE_KEY;\n    this.v2siteKey = V2_SITE_KEY;\n    this.action = ACTION;\n    this.setWidgetID = setWidgetID;\n  }\n\n  async getToken() {\n    let isV2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    let widgetID = arguments.length > 1 ? arguments[1] : undefined;\n    let index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    let token = \"\",\n        v2Token = \"\";\n    !isV2 && (await window.grecaptcha.execute(this.siteKey, {\n      action: this.action\n    }).then(res => {\n      token = res;\n    }));\n\n    if (isV2) {\n      v2Token = await window.grecaptcha.getResponse(widgetID.get(index));\n    }\n\n    return {\n      token,\n      v2Token\n    };\n  }\n\n}","map":{"version":3,"names":["ReCaptcha","constructor","SITE_KEY","ACTION","V2_SITE_KEY","setWidgetID","siteKey","v2siteKey","action","resetV2Captcha","widgetID","index","v2CaptchaContainer","document","getElementsByClassName","get","window","grecaptcha","reset","style","display","loadV2Captcha","reload","newWidgetID","render","set","loadReCaptcha","script","createElement","src","body","appendChild","getToken","isV2","token","v2Token","execute","then","res","getResponse"],"sources":["/Users/ashutosh/Desktop/avalanche-faucet/client/src/components/ReCaptcha.ts"],"sourcesContent":["declare global {\n    interface Window {\n        grecaptcha: any\n    }\n}\n\nexport default class ReCaptcha {\n    siteKey: string\n    v2siteKey?: string\n    action: string\n    setWidgetID: any\n        \n    constructor(SITE_KEY: string, ACTION: string, V2_SITE_KEY: string, setWidgetID: any) {\n        this.loadReCaptcha(SITE_KEY)\n        \n        this.siteKey = SITE_KEY\n        this.v2siteKey = V2_SITE_KEY\n        this.action = ACTION\n        this.setWidgetID = setWidgetID\n    }\n\n    async getToken(isV2 = false, widgetID: any, index: number = 0): Promise<{token?: string, v2Token?: string}> {\n        let token = \"\", v2Token = \"\"\n        !isV2 && await window.grecaptcha.execute(this.siteKey, {action: this.action})\n            .then((res: string) => {\n                token = res\n            })\n        \n        if(isV2){\n            v2Token = await window.grecaptcha.getResponse(widgetID.get(index))\n        }\n\n        return { token, v2Token }\n    }\n\n    resetV2Captcha = (widgetID: any, index: number = 0) => {\n        const v2CaptchaContainer = document.getElementsByClassName('v2-recaptcha')[index] as HTMLElement\n        if(v2CaptchaContainer) {\n            if(widgetID.get(index) || widgetID.get(index) == 0) {\n                window.grecaptcha.reset(widgetID.get(index))\n            }\n            v2CaptchaContainer.style.display = \"none\"\n        }\n    }\n\n    loadV2Captcha = (v2siteKey: string, widgetID: any, index: number = 0, reload: boolean = false) => {\n        this.resetV2Captcha(widgetID, index)\n        const v2CaptchaContainer = document.getElementsByClassName('v2-recaptcha')[index] as HTMLElement\n        if((widgetID.get(index) || widgetID.get(index) == \"0\") && !reload) {\n            const v2CaptchaContainer = document.getElementsByClassName('v2-recaptcha')[index] as HTMLElement\n            if(v2CaptchaContainer) {\n                v2CaptchaContainer.style.display = \"block\"\n            }\n        } else {\n            v2CaptchaContainer.style.display = \"block\"\n            const newWidgetID = window.grecaptcha.render(v2CaptchaContainer, {\n                'sitekey' : v2siteKey,\n                'theme': 'dark'\n            })\n            widgetID.set(index, newWidgetID)\n            this.setWidgetID(widgetID)\n        }\n\n        return true\n    }\n\n    loadReCaptcha = (siteKey: string): boolean => {\n        const script = document.createElement('script')\n        script.src = `https://www.recaptcha.net/recaptcha/api.js?render=${siteKey}`\n\n        document.body.appendChild(script)\n        return true\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}