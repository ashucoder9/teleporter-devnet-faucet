{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ashutosh/Desktop/avalanche-faucet/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ashutosh/Desktop/avalanche-faucet/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/ashutosh/Desktop/avalanche-faucet/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/ashutosh/Desktop/avalanche-faucet/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";var ReCaptcha=/*#__PURE__*/function(){function ReCaptcha(SITE_KEY,ACTION,V2_SITE_KEY,setWidgetID){var _this=this;_classCallCheck(this,ReCaptcha);this.siteKey=void 0;this.v2siteKey=void 0;this.action=void 0;this.setWidgetID=void 0;this.resetV2Captcha=function(widgetID){var index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var v2CaptchaContainer=document.getElementsByClassName('v2-recaptcha')[index];if(v2CaptchaContainer){if(widgetID.get(index)||widgetID.get(index)==0){window.grecaptcha.reset(widgetID.get(index));}v2CaptchaContainer.style.display=\"none\";}};this.loadV2Captcha=function(v2siteKey,widgetID){var index=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var reload=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;_this.resetV2Captcha(widgetID,index);var v2CaptchaContainer=document.getElementsByClassName('v2-recaptcha')[index];if((widgetID.get(index)||widgetID.get(index)==\"0\")&&!reload){var _v2CaptchaContainer=document.getElementsByClassName('v2-recaptcha')[index];if(_v2CaptchaContainer){_v2CaptchaContainer.style.display=\"block\";}}else{v2CaptchaContainer.style.display=\"block\";var newWidgetID=window.grecaptcha.render(v2CaptchaContainer,{'sitekey':v2siteKey,'theme':'dark'});widgetID.set(index,newWidgetID);_this.setWidgetID(widgetID);}return true;};this.loadReCaptcha=function(siteKey){var script=document.createElement('script');script.src=\"https://www.recaptcha.net/recaptcha/api.js?render=\".concat(siteKey);document.body.appendChild(script);return true;};this.loadReCaptcha(SITE_KEY);this.siteKey=SITE_KEY;this.v2siteKey=V2_SITE_KEY;this.action=ACTION;this.setWidgetID=setWidgetID;}_createClass(ReCaptcha,[{key:\"getToken\",value:function(){var _getToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var isV2,widgetID,index,token,v2Token,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isV2=_args.length>0&&_args[0]!==undefined?_args[0]:false;widgetID=_args.length>1?_args[1]:undefined;index=_args.length>2&&_args[2]!==undefined?_args[2]:0;token=\"\",v2Token=\"\";_context.t0=!isV2;if(!_context.t0){_context.next=8;break;}_context.next=8;return window.grecaptcha.execute(this.siteKey,{action:this.action}).then(function(res){token=res;});case 8:if(!isV2){_context.next=12;break;}_context.next=11;return window.grecaptcha.getResponse(widgetID.get(index));case 11:v2Token=_context.sent;case 12:return _context.abrupt(\"return\",{token:token,v2Token:v2Token});case 13:case\"end\":return _context.stop();}}},_callee,this);}));function getToken(){return _getToken.apply(this,arguments);}return getToken;}()}]);return ReCaptcha;}();export{ReCaptcha as default};","map":{"version":3,"names":["ReCaptcha","SITE_KEY","ACTION","V2_SITE_KEY","setWidgetID","siteKey","v2siteKey","action","resetV2Captcha","widgetID","index","v2CaptchaContainer","document","getElementsByClassName","get","window","grecaptcha","reset","style","display","loadV2Captcha","reload","newWidgetID","render","set","loadReCaptcha","script","createElement","src","body","appendChild","isV2","token","v2Token","execute","then","res","getResponse"],"sources":["/Users/ashutosh/Desktop/avalanche-faucet/client/src/components/ReCaptcha.ts"],"sourcesContent":["declare global {\n    interface Window {\n        grecaptcha: any\n    }\n}\n\nexport default class ReCaptcha {\n    siteKey: string\n    v2siteKey?: string\n    action: string\n    setWidgetID: any\n        \n    constructor(SITE_KEY: string, ACTION: string, V2_SITE_KEY: string, setWidgetID: any) {\n        this.loadReCaptcha(SITE_KEY)\n        \n        this.siteKey = SITE_KEY\n        this.v2siteKey = V2_SITE_KEY\n        this.action = ACTION\n        this.setWidgetID = setWidgetID\n    }\n\n    async getToken(isV2 = false, widgetID: any, index: number = 0): Promise<{token?: string, v2Token?: string}> {\n        let token = \"\", v2Token = \"\"\n        !isV2 && await window.grecaptcha.execute(this.siteKey, {action: this.action})\n            .then((res: string) => {\n                token = res\n            })\n        \n        if(isV2){\n            v2Token = await window.grecaptcha.getResponse(widgetID.get(index))\n        }\n\n        return { token, v2Token }\n    }\n\n    resetV2Captcha = (widgetID: any, index: number = 0) => {\n        const v2CaptchaContainer = document.getElementsByClassName('v2-recaptcha')[index] as HTMLElement\n        if(v2CaptchaContainer) {\n            if(widgetID.get(index) || widgetID.get(index) == 0) {\n                window.grecaptcha.reset(widgetID.get(index))\n            }\n            v2CaptchaContainer.style.display = \"none\"\n        }\n    }\n\n    loadV2Captcha = (v2siteKey: string, widgetID: any, index: number = 0, reload: boolean = false) => {\n        this.resetV2Captcha(widgetID, index)\n        const v2CaptchaContainer = document.getElementsByClassName('v2-recaptcha')[index] as HTMLElement\n        if((widgetID.get(index) || widgetID.get(index) == \"0\") && !reload) {\n            const v2CaptchaContainer = document.getElementsByClassName('v2-recaptcha')[index] as HTMLElement\n            if(v2CaptchaContainer) {\n                v2CaptchaContainer.style.display = \"block\"\n            }\n        } else {\n            v2CaptchaContainer.style.display = \"block\"\n            const newWidgetID = window.grecaptcha.render(v2CaptchaContainer, {\n                'sitekey' : v2siteKey,\n                'theme': 'dark'\n            })\n            widgetID.set(index, newWidgetID)\n            this.setWidgetID(widgetID)\n        }\n\n        return true\n    }\n\n    loadReCaptcha = (siteKey: string): boolean => {\n        const script = document.createElement('script')\n        script.src = `https://www.recaptcha.net/recaptcha/api.js?render=${siteKey}`\n\n        document.body.appendChild(script)\n        return true\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}